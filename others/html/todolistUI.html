<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>y00's first react project</title>
		<script src="https://unpkg.com/react@16/umd/react.development.js"></script>
		<script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
		<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

	</head>

	<body>
		



		<div>
			<input type="text" id="content">
			<button id="add">添加</button>
		</div>
		
		<div id="p1">

		</div>


<script type="text/javascript">
	
	const addButton = document.getElementById('add');
	const inputElement = document.getElementById('content');
	const todoListDom = document.getElementById('todoList');
	const todos = JSON.parse(localStorage.getItem('todos')) || [];
	
	// 新增方法
	function addItem(content) {
	  let todoItem = document.createElement('li');
	  todoItem.innerText = content;
	  document.getElementById('todoList').appendChild(todoItem);
	
	  // 保存到本地
	  todos.push(content);
	  localStorage.setItem('todos', JSON.stringify(todos));
	}
	
	// 删除方法
	function deleteItem(element) {
	  element.remove();
	  // 保存到本地
	  todos.map((value, index) => {
	    if(value === element.innerText.trim()) {
	      todos.splice(index, 1);
	    }
	  })
	  localStorage.setItem('todos', JSON.stringify(todos));
	}
	
	// 点击添加按钮
	addButton.addEventListener('click', () => {
	  if(inputElement.value) {
	    addItem(inputElement.value.trim());
	  }
	})
	
	// 点击条目删除
	todoList.addEventListener('click', (event) => {
	  if(event.target.tagName === 'LI') {
	    deleteItem(event.target);
	  }
	}, true)
	
	// 默认读取localstorage
	todos.forEach(content => {
	  let todoItem = document.createElement('li');
	  todoItem.innerText = content;
	  todoListDom.appendChild(todoItem);
	});
</script>

	<script type="text/babel">
			function Item(){
			return (
		<ul id="todoList">
			<li>make</li>
			<li>a</li>
			<li>to</li>
			<li>do</li>
			<li>list</li>
		</ul>
	);
}




      ReactDOM.render(
        <Item />,
        document.getElementById('p1')
      );


    </script>


		
		


	</body>
</html>


